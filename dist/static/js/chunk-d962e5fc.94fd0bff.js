(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d962e5fc"],{"4d3b":function(t,e,n){"use strict";var a=n("f5b9"),i=n.n(a);i.a},"97a1":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{staticStyle:{width:"100%"}},[n("el-col",{attrs:{span:7}},[n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("el-input",{attrs:{placeholder:"输入关键字过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),t._v(" "),n("el-scrollbar",[n("el-tree",{directives:[{name:"loading",rawName:"v-loading.body",value:t.loading,expression:"loading",modifiers:{body:!0}}],ref:"tree",staticStyle:{height:"620px"},attrs:{props:t.defaultProps,data:t.treeData,"default-expand-all":"","node-key":"id","highlight-current":"","expand-on-click-node":!1,"filter-node-method":t.filterNode},on:{"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.node,i=e.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[i.children?n("svg-icon",{attrs:{"icon-class":"文件夹"}}):n("svg-icon",{attrs:{"icon-class":"文档"}}),t._v(" "),n("span",[t._v(t._s(a.label))])],1),t._v(" "),n("span",[n("el-tooltip",{attrs:{content:"新增"}},[n("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return e.stopPropagation(),t.handlerTreeAdd(i)}}})],1),t._v(" "),n("el-tooltip",{attrs:{content:"编辑"}},[n("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit-outline"},on:{click:function(e){return e.stopPropagation(),t.handlerTreeEdit(i)}}})],1),t._v(" "),i.parentId>=0?n("el-tooltip",{attrs:{content:"删除"}},[n("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.stopPropagation(),t.handlerTreeDelete(i)}}})],1):t._e()],1)])}}])})],1)],1)],1),t._v(" "),n("el-col",{attrs:{span:17}},[n("el-card",{attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v(t._s(t.formTitleMap[t.formStatus]))])]),t._v(" "),n("el-form",{directives:[{name:"loading",rawName:"v-loading.body",value:t.detailLoading,expression:"detailLoading",modifiers:{body:!0}}],ref:"form",attrs:{model:t.form,"label-width":"80px",disabled:"detail"==t.formStatus}},[n("el-form-item",{staticStyle:{width:"47%"},attrs:{label:"菜单标题",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入菜单标题"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"路由路径",prop:"path"}},[n("el-input",{attrs:{placeholder:"请输入路由路径"},model:{value:t.form.path,callback:function(e){t.$set(t.form,"path","string"===typeof e?e.trim():e)},expression:"form.path"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"前端组件",prop:"component"}},[n("el-input",{attrs:{placeholder:"请输入组件路径"},model:{value:t.form.component,callback:function(e){t.$set(t.form,"component","string"===typeof e?e.trim():e)},expression:"form.component"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"跳转路径",prop:"redirect"}},[n("el-input",{attrs:{placeholder:"请输入跳转路径"},model:{value:t.form.redirect,callback:function(e){t.$set(t.form,"redirect","string"===typeof e?e.trim():e)},expression:"form.redirect"}})],1),t._v(" "),"update"==t.formStatus?n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(){return t.update()}}},[t._v("更新")]),t._v(" "),n("el-button",{on:{click:function(){return t.cancel(!0)}}},[t._v("取消")])],1):t._e(),t._v(" "),"create"==t.formStatus?n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(){return t.create()}}},[t._v("保存")]),t._v(" "),n("el-button",{on:{click:function(){return t.cancel(!0)}}},[t._v("取消")])],1):t._e()],1)],1)],1)],1)],1)},i=[],r=(n("ac6a"),n("5b64")),o={data:function(){return{filterText:"",treeData:[],loading:!1,listLoading:!1,title:"详情",defaultProps:{children:"children",label:"name"},form:{name:void 0,path:void 0,component:void 0,redirect:void 0},detailLoading:!1,formStatus:"detail",formTitleMap:{detail:"详情",create:"新增",update:"编辑"}}},created:function(){this.getMenus()},watch:{filterText:function(t){this.$refs.tree.filter(t)}},methods:{getMenus:function(){var t=this;this.loading=!0,Object(r["c"])().then(function(e){var n=e.data.data;t.formatTree(n),t.loading=!1})},filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},formatTree:function(t){var e={id:-1,name:"所有菜单",children:[]};t.forEach(function(n){0==n.parentId?e.children.push(n):t.forEach(function(t){t.id==n.parentId&&(t.children||(t.children=[]),t.children.push(n))})}),this.treeData=[],this.treeData.push(e)},handleNodeClick:function(t){Object.assign(this.form,t),this.formStatus="detail"},handlerTreeAdd:function(t){this.resetForm(),this.form.parentId=Math.max(0,t.id),this.formStatus="create"},handlerTreeEdit:function(t){Object.assign(this.form,t),this.formStatus="update"},handlerTreeDelete:function(t){var e=this,n=[];this.getMenuIds(t,n),console.log(JSON.stringify(n));var a=t.children?"此操作将永久删除当前目录以及所有子菜单, 是否继续?":"此操作将永久删除当前菜单, 是否继续?";this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r["a"])(n).then(function(t){var n=t.data.data;n?(e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.cancel(!0),e.getMenus()):e.$notify({title:"失败",message:"删除失败",type:"error"})})}).catch(function(){e.$notify.info({title:"消息",message:"已取消删除"})})},getMenuIds:function(t,e){var n=this;e.push(t.id),t.children&&t.children.forEach(function(t){n.getMenuIds(t,e)})},update:function(){this.editMenu(this.form)},create:function(){this.editMenu(this.form)},editMenu:function(t){var e=this;this.detailLoading=!0,Object(r["b"])(t).then(function(t){var n=t.data.data;e.detailLoading=!1,n?(e.$notify({title:"成功",message:"编辑成功",type:"success",duration:2e3}),e.cancel(!0),e.getMenus()):e.$notify({title:"失败",message:"编辑失败",type:"error"})})},cancel:function(t){this.formStatus="detail",t&&this.resetForm()},resetForm:function(){this.$refs.form.resetFields()}}},l=o,s=(n("4d3b"),n("2877")),c=Object(s["a"])(l,a,i,!1,null,"6b5113d8",null);e["default"]=c.exports},f5b9:function(t,e,n){}}]);